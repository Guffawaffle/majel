#!/usr/bin/env bash
# .githooks/pre-commit — Fast pre-commit gate for Majel
#
# Runs: lint (ESLint) + server typecheck + web typecheck
# Install: git config core.hooksPath .githooks

set -euo pipefail

echo "⟐ pre-commit: CSP hash"
node scripts/check-csp-hash.mjs

echo "⟐ pre-commit: lint"
npm run lint --silent

echo "⟐ pre-commit: typecheck"
npm run typecheck --silent

echo "⟐ pre-commit: check:web"
npm run check:web --silent

echo "✅ pre-commit passed"
